<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Overview | BenchmarkDotNet </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Overview | BenchmarkDotNet ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../logo/icon-32.png">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  
    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
      ga('create', 'UA-41419012-6', 'auto');
      ga('send', 'pageview');
  
    </script>
    <!-- /Google Analytics -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter40812449 = new Ya.Metrika({
                        id:40812449,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true
                    });
                } catch(e) { }
            });
  
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";
  
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/40812449" style="position:absolute; left:-9999px;" alt=""></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <!-- at the end of the HEAD -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <link rel="stylesheet" href="../styles/search.css">
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo/icon.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <div class="navbar-right navbar-form">
                <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off" autofocus="">
              </div>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="docs.overview">
<h1 id="overview">Overview</h1>

<h2 id="install">Install</h2>
<p>Create new console application and install the <a href="https://www.nuget.org/packages/BenchmarkDotNet/">BenchmarkDotNet</a> NuGet package. We support:</p>
<ul>
<li><em>Projects:</em> classic and modern with PackageReferences</li>
<li><em>Runtimes:</em> Full .NET Framework (4.6+), .NET Core (2.0+), Mono, NativeAOT</li>
<li><em>OS:</em> Windows, Linux, MacOS</li>
<li><em>Languages:</em> C#, F#, VB</li>
</ul>
<h2 id="design-a-benchmark">Design a benchmark</h2>
<p>Create a new console application, write a class with methods that you want to measure, and mark them with the <code>Benchmark</code> attribute. In the following example, we
compare the <a href="https://en.wikipedia.org/wiki/MD5">MD5</a> and <a href="https://en.wikipedia.org/wiki/SHA-2">SHA256</a> cryptographic hash functions:</p>
<pre><code class="lang-cs">using System;
using System.Security.Cryptography;
using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Running;

namespace MyBenchmarks
{
    public class Md5VsSha256
    {
        private const int N = 10000;
        private readonly byte[] data;

        private readonly SHA256 sha256 = SHA256.Create();
        private readonly MD5 md5 = MD5.Create();

        public Md5VsSha256()
        {
            data = new byte[N];
            new Random(42).NextBytes(data);
        }

        [Benchmark]
        public byte[] Sha256() =&gt; sha256.ComputeHash(data);

        [Benchmark]
        public byte[] Md5() =&gt; md5.ComputeHash(data);
    }

    public class Program
    {
        public static void Main(string[] args)
        {
            var summary = BenchmarkRunner.Run(typeof(Program).Assembly);
        }
    }
}
</code></pre>
<p>The <code>BenchmarkRunner.Run&lt;Md5VsSha256&gt;()</code> call runs your benchmarks and prints results to the console.</p>
<p>Note that BenchmarkDotNet will only run benchmarks if the application is built in the Release configuration.
This is to prevent unoptimized code from being benchmarked.
BenchmarkDotNet will issue an error if you forget to change the configuration.</p>
<h2 id="benchmark-results">Benchmark results</h2>
<pre><code>BenchmarkDotNet=v0.13.2, OS=Windows 10 (10.0.19045.2251)
Intel Core i7-4770HQ CPU 2.20GHz (Haswell), 1 CPU, 8 logical and 4 physical cores
.NET SDK=7.0.100
  [Host]     : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2
  DefaultJob : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2


| Method |     Mean |    Error |   StdDev |
|------- |---------:|---------:|---------:|
| Sha256 | 51.57 us | 0.311 us | 0.291 us |
|    Md5 | 21.91 us | 0.138 us | 0.129 us |
</code></pre>
<h2 id="jobs">Jobs</h2>
<p>BenchmarkDotNet can benchmark your code in several environments at once. For example, to compare your benchmark's performance in .NET Framework, .NET Core, Mono and NativeAOT, you can add <code>SimpleJob</code> attributes to the benchmark class:</p>
<pre><code class="lang-cs">[SimpleJob(RuntimeMoniker.Net481)]
[SimpleJob(RuntimeMoniker.Net70)]
[SimpleJob(RuntimeMoniker.NativeAot70)]
[SimpleJob(RuntimeMoniker.Mono)]
public class Md5VsSha256
</code></pre>
<p>Example of the result:</p>
<pre><code>BenchmarkDotNet=v0.13.2, OS=Windows 10 (10.0.19045.2251)
Intel Core i7-4770HQ CPU 2.20GHz (Haswell), 1 CPU, 8 logical and 4 physical cores
.NET SDK=7.0.100
  [Host]               : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2
  .NET 7.0             : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2
  .NET Framework 4.8.1 : .NET Framework 4.8.1 (4.8.9037.0), X64 RyuJIT VectorSize=256
  Mono                 : Mono 6.12.0 (Visual Studio), X64 VectorSize=128
  NativeAOT 7.0        : .NET 7.0.0 (7.0.22.51805), X64 RyuJIT AVX2

| Method |                  Job |              Runtime |      Mean |    Error |   StdDev |
|------- |--------------------- |--------------------- |----------:|---------:|---------:|
| Sha256 |             .NET 7.0 |             .NET 7.0 |  51.90 us | 0.341 us | 0.302 us |
|    Md5 |             .NET 7.0 |             .NET 7.0 |  21.96 us | 0.052 us | 0.049 us |
| Sha256 | .NET Framework 4.8.1 | .NET Framework 4.8.1 | 206.33 us | 2.069 us | 1.834 us |
|    Md5 | .NET Framework 4.8.1 | .NET Framework 4.8.1 |  23.28 us | 0.094 us | 0.083 us |
| Sha256 |                 Mono |                 Mono | 167.70 us | 1.216 us | 1.137 us |
|    Md5 |                 Mono |                 Mono |  42.12 us | 0.145 us | 0.136 us |
| Sha256 |        NativeAOT 7.0 |        NativeAOT 7.0 |  51.45 us | 0.226 us | 0.200 us |
|    Md5 |        NativeAOT 7.0 |        NativeAOT 7.0 |  21.88 us | 0.050 us | 0.041 us |
</code></pre>
<p>There are many predefined job attributes which you can use. For example, you can compare <code>LegacyJitX86</code>, <code>LegacyJitX64</code>, and <code>RyuJitX64</code>:</p>
<pre><code class="lang-cs">[LegacyJitX86Job, LegacyJitX64Job, RyuJitX64Job]
</code></pre>
<p>Or, you can define your own jobs:</p>
<pre><code class="lang-cs">[Config(typeof(Config))]
public class Md5VsSha256
{
    private class Config : ManualConfig
    {
        public Config()
        {
            AddJob(new Job(Job.Dry)
            {
                Environment = { Jit = Jit.LegacyJit, Platform = Platform.X64 },
                Run = { LaunchCount = 3, WarmupCount = 5, IterationCount = 10 },
                Accuracy = { MaxRelativeError = 0.01 }
            });
        }
    }
</code></pre>
<p>Read more: <a href="configs/jobs.html">Jobs</a>, <a href="configs/configs.html">Configs</a></p>
<h2 id="columns">Columns</h2>
<p>You can add columns to the summary table:</p>
<pre><code class="lang-cs">[MinColumn, MaxColumn]
public class Md5VsSha256
</code></pre>
<table>
<thead>
<tr>
<th>Method</th>
<th>Median</th>
<th>StdDev</th>
<th>Min</th>
<th>Max</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sha256</td>
<td>131.3200 us</td>
<td>4.6744 us</td>
<td>129.8216 us</td>
<td>147.7630 us</td>
</tr>
<tr>
<td>Md5</td>
<td>26.2847 us</td>
<td>0.4424 us</td>
<td>25.8442 us</td>
<td>27.4258 us</td>
</tr>
</tbody>
</table>
<p>You can also define custom columns based on the full benchmark summary.</p>
<p>Read more: <a href="configs/columns.html">Columns</a></p>
<h2 id="exporters">Exporters</h2>
<p>You can export the results of your benchmark in different formats:</p>
<pre><code class="lang-cs">[MarkdownExporter, AsciiDocExporter, HtmlExporter, CsvExporter, RPlotExporter]
public class Md5VsSha256
</code></pre>
<p>If you have installed R, <code>RPlotExporter</code> will generate a lot of nice plots:</p>
<p><img src="../images/v0.12.0/rplot.png" alt=""></p>
<p>Read more: <a href="configs/exporters.html">Exporters</a></p>
<h2 id="baseline">Baseline</h2>
<p>To view the relative performance of your benchmarks, mark one of your benchmark methods as the <code>Baseline</code>:</p>
<pre><code class="lang-cs">public class Sleeps
{
    [Benchmark]
    public void Time50() =&gt; Thread.Sleep(50);

    [Benchmark(Baseline = true)]
    public void Time100() =&gt; Thread.Sleep(100);

    [Benchmark]
    public void Time150() =&gt; Thread.Sleep(150);
}
</code></pre>
<p>A new column will be added to the summary table:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Median</th>
<th>StdDev</th>
<th>Ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time100</td>
<td>100.2640 ms</td>
<td>0.1238 ms</td>
<td>1.00</td>
</tr>
<tr>
<td>Time150</td>
<td>150.2093 ms</td>
<td>0.1034 ms</td>
<td>1.50</td>
</tr>
<tr>
<td>Time50</td>
<td>50.2509 ms</td>
<td>0.1153 ms</td>
<td>0.50</td>
</tr>
</tbody>
</table>
<p>Read more: <a href="features/baselines.html">Baselines</a></p>
<h2 id="params">Params</h2>
<p>You can mark one or several fields or properties in your class with the <code>Params</code> attribute. In this attribute, you can specify a set of values. BenchmarkDotNet will run benchmarks for each combination of params values.</p>
<pre><code class="lang-cs">public class IntroParams
{
    [Params(100, 200)]
    public int A { get; set; }

    [Params(10, 20)]
    public int B { get; set; }

    [Benchmark]
    public void Benchmark()
    {
        Thread.Sleep(A + B + 5);
    }
}
</code></pre>
<table>
<thead>
<tr>
<th>Method</th>
<th>Median</th>
<th>StdDev</th>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>Benchmark</td>
<td>115.3325 ms</td>
<td>0.0242 ms</td>
<td>100</td>
<td>10</td>
</tr>
<tr>
<td>Benchmark</td>
<td>125.3282 ms</td>
<td>0.0245 ms</td>
<td>100</td>
<td>20</td>
</tr>
<tr>
<td>Benchmark</td>
<td>215.3024 ms</td>
<td>0.0375 ms</td>
<td>200</td>
<td>10</td>
</tr>
<tr>
<td>Benchmark</td>
<td>225.2710 ms</td>
<td>0.0434 ms</td>
<td>200</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>Read more: <a href="features/parameterization.html">Parameterization</a></p>
<h2 id="languages">Languages</h2>
<p>You can also write benchmarks in <code>F#</code> or <code>VB</code>.</p>
<pre><code class="lang-fs">type StringKeyComparison () =
    let mutable arr : string [] = [||]
    let dict1 = ConcurrentDictionary&lt;_,_&gt;()
    let dict2 = ConcurrentDictionary&lt;_,_&gt;(StringComparer.Ordinal)

    [&lt;Params (100, 500, 1000, 2000)&gt;] 
    member val public DictSize = 0 with get, set

    [&lt;GlobalSetup&gt;]
    member self.GlobalSetupData() =
        dict1.Clear(); dict2.Clear()
        arr &lt;- getStrings self.DictSize
        arr |&gt; Array.iter (fun x -&gt; dict1.[x] &lt;- true ; dict2.[x] &lt;- true)

    [&lt;Benchmark&gt;]
    member self.StandardLookup () = lookup arr dict1

    [&lt;Benchmark&gt;]
    member self.OrdinalLookup () = lookup arr dict2
</code></pre>
<pre><code class="lang-vb">Public Class Sample
    &lt;Params(1, 2)&gt;
    Public Property A As Integer
    &lt;Params(3, 4)&gt;
    Public Property B As Integer

    &lt;Benchmark&gt;
    Public Function Benchmark() As Integer
            return A + B
    End Function
End Class
</code></pre>
<h2 id="diagnostics">Diagnostics</h2>
<p>A diagnoser can attach to your benchmarks and collect additional information.</p>
<p>Examples of diagnosers built in to BenchmarkDotNet are:</p>
<ul>
<li>Garbge collection and allocation statistics (<code>MemoryDiagnoser</code>).</li>
<li>Lock contention and thread pool statistics (<code>ThreadingDiagnoser</code>), which is only available on .NET Core 3.0+.</li>
<li>JIT inlining events (<code>InliningDiagnoser</code>). You can find this diagnoser in a separated package with diagnosers for Windows (<code>BenchmarkDotNet.Diagnostics.Windows</code>): <a href="https://www.nuget.org/packages/BenchmarkDotNet.Diagnostics.Windows/"><img src="https://img.shields.io/nuget/v/BenchmarkDotNet.svg" alt="NuGet"></a></li>
</ul>
<p>Below is a sample benchmark using <code>MemoryDiagnoser</code>. Note the extra columns on the right-hand side (<code>Gen 0</code> and <code>Allocated</code>):</p>
<pre><code>    Method |       Mean |    StdDev |  Gen 0 | Allocated |
---------- |----------- |---------- |------- |---------- |
 Iterative | 31.0739 ns | 0.1091 ns |      - |       0 B |
      LINQ | 83.0435 ns | 1.0103 ns | 0.0069 |      32 B | 
</code></pre>
<p>Read more: <a href="configs/diagnosers.html">Diagnosers</a></p>
<h2 id="benchmarkrunner">BenchmarkRunner</h2>
<p>There are several ways to run your benchmarks.</p>
<pre><code class="lang-cs">var summary = BenchmarkRunner.Run&lt;MyBenchmarkClass&gt;();
var summary = BenchmarkRunner.Run(typeof(MyBenchmarkClass));
var summaries = BenchmarkSwitcher.FromAssembly(typeof(Program).Assembly).Run(args);
</code></pre>
<p>Read more: <a href="guides/how-to-run.html">How to run your benchmarks</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dotnet/BenchmarkDotNet/blob/docs-stable/docs/articles/overview.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright &copy; 2013–2023 .NET Foundation and contributors
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <!-- at the end of the BODY -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: 'c56d6c558557cfa1fd103a049363cf8b',
            indexName: 'benchmarkdotnet',
            inputSelector: '#search-query',
            debug: false // Set debug to true if you want to inspect the dropdown
        });
    </script>  </body>
</html>
